#!/bin/bash

echo "starting setup"

log_file=~/install_progress_log.txt

function install-apt {
        sudo apt install -y $1
        if type -p $1 > /dev/null; then
                echo "$1 Installed" >> $log_file
        else
                echo "$1 FAILED TO INSTALL!!!" >> $log_file
        fi
}

function install-snap {
        sudo snap install --classic $1
        if type -p $1 > /dev/null; then
                echo "$1 Installed" >> $log_file
        else
                echo "$1 FAILED TO INSTALL!!!" >> $log_file
        fi
}


function install-brave {

        curl -s https://brave-browser-apt-release.s3.brave.com/brave-core.asc | sudo apt-key --keyring /etc/apt/trusted.gpg.d/brave-browser-release.gpg add -

        echo "deb [arch=amd64] https://brave-browser-apt-release.s3.brave.com/ stable main" | sudo tee /etc/apt/sources.list.d/brave-browser-release.list

        sudo apt update

        install-apt brave-browser
}

# command line programs
install-apt curl
install-apt unzip
install-apt vim
install-apt git
install-apt nodejs
install-apt npm

# graphical programs
install-apt gnome-tweaks
install-apt filezilla
install-apt calibre
install-apt gimp

# needs special treatment
install-brave

# snap packages
# echo "== Installed snap packages =="
install-snap code

# gnome extensions
# echo "== Gnome extensions =="


#==============
# Give the user a summary of what has been installed
#==============
echo -e "\n====== Summary ======\n"
cat $log_file
echo
rm $log_file
